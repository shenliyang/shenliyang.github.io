!function(){function e(e){if(h)e(h);else{var t=new XMLHttpRequest;t.open("GET","/content.json",!0),t.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response||this.responseText);h=t instanceof Array?t:t.posts,e(h)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}}function t(e,t){return n(e.title,t)||n(e.text,t)}function n(e,t){return t.lastIndex=0,t.test(e)}function i(e){var t="";t=e.length?e.map(function(e){return o(y,{title:e.title,path:e.path,content:r(e.text)})}).join(""):'<div class="tips"><p>没有找到相关结果!</p></div>',g.innerHTML=t}function r(e){var t=f.value,n=e.indexOf(t),i=e.replace(t,"<b>"+t+"</b>");if(n>0)return i.substr(n-15,45)}function o(e,t){return e.replace(/\{\w+\}/g,function(e){var n=e.replace(/\{|\}/g,"");return t[n]||""})}function s(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function c(e,t){s(e,t)||(e.className+=" "+t)}function u(e,t){if(s(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function a(n){var r=this.value.trim();if(!r)return void i("");var o=new RegExp(r.replace(/[ ]/g,"|"),"gmi");e(function(e){i(e.filter(function(e){return t(e,o)}))}),n.preventDefault(),u(p,"hide"),u(m,"hide"),f.onfocus=function(){u(p,"hide"),u(m,"hide")}}var d,l,h,f=document.getElementById("search-key"),m=(document.getElementById("search-local"),document.getElementById("search-form"),document.getElementById("result-mask")),p=document.getElementById("result-wrap"),g=document.getElementById("search-result"),y=document.getElementById("search-tpl").innerHTML;window.innerWidth?d=parseInt(window.innerWidth):document.body&&document.body.clientWidth&&(d=parseInt(document.body.clientWidth)),window.innerHeight?l=parseInt(window.innerHeight):document.body&&document.body.clientHeight&&(l=parseInt(document.body.clientHeight)),m.style.width=d+"px",m.style.height=l+"px",f.onfocus=function(){f.addEventListener("input",a)},m.onclick=function(){c(p,"hide"),c(m,"hide")}}();